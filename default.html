<!DOCTYPE html>
<html ng-app="modern-gitter">
<head>
    <meta charset="utf-8" />
    <title>Modern Gitter</title>

    <!-- WinJS references -->
    <link href="node_modules/winjs/css/ui-light.css" rel="stylesheet" />
    <script src="node_modules/winjs/js/base.js"></script>
    <script src="node_modules/winjs/js/ui.js"></script>

    <!-- Angular WinJS references -->
    <script src="node_modules/angular/angular.js"></script>
    <script src="node_modules/angular-sanitize/angular-sanitize.js"></script>
    <script src="node_modules/angular-winjs/js/angular-winjs.js"></script>

    <!-- Faye references -->
    <script src="node_modules/faye/browser/faye-browser-min.js"></script>

    <!-- App references -->
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/default.js"></script>
</head>
<body class="win-type-body" ng-controller="AppCtrl">
    <win-split-view win-control="splitViewWinControl" class="splitView">
        <!-- pane area -->
        <win-split-view-pane>
            <div class="header">
                <button class="win-splitviewpanetoggle"
                        data-win-control="WinJS.UI.SplitViewPaneToggle"
                        data-win-options="{ splitView: select('.splitView') }"></button>
                <div class="title">Modern Gitter</div>
            </div>

            <div class="win-scrollview rooms-list">
                <win-split-view-command class="room-tile" ng-repeat="room in rooms" ng-click="selectRoom(room)">
                    <img class="room-tile-icon" ng-src="{{ room.image }}" />
                    <div ng-show="splitViewWinControl.paneOpened" class="room-tile-text">{{ room.name }}</div>
                </win-split-view-command>
            </div>
        </win-split-view-pane>

        <!-- content area -->
        <win-split-view-content class="content-area">
            <!-- showed when no room selected -->
            <div class="content" ng-hide="currentRoom">
                <div class="fit-view flex">
                    <div class="no-room-text">Select a room</div>
                </div>
            </div>

            <!-- show room -->
            <div ng-show="currentRoom">
                <!-- room description -->
                <div id="roomDescription" class="content">
                    <h2 class="win-h2">{{ currentRoom.name }}</h2>
                    <h6 class="win-h6 room-topic" ng-show="currentRoom.topic">{{ currentRoom.topic }}</h6>
                </div>

                <!-- message template -->
                <div class="messageTemplate" data-win-control="WinJS.Binding.Template" style="display: none;">
                    <div data-win-bind="innerHTML: html"></div>
                </div>

                <div class="list-header">
                    <progress class="win-progress-bar progress hide"></progress>
                </div>

                <!-- list view of messages -->
                <div id="messagesListView"
                     data-win-control="WinJS.UI.ListView"
                     data-win-options="{
                        itemTemplate: select('.messageTemplate'),
                        header: select('.list-header'),
                        selectionMode: 'none',
                        tapBehavior: 'none',
                        layout: { type: WinJS.UI.ListLayout }
                        }">
                </div>

                <!-- actions (send message) -->
                <div id="actions">
                    <input id="textMessage" type="text" ng-model="textMessage" placeholder="Enter your text here..." />
                    <button ng-disabled="!textMessage" ng-click="sendMessage()" style="font-family: 'Segoe MDL2 Assets'">&#xE122;</button>
                </div>
            </div>
        </win-split-view-content>
    </win-split-view>
</body>
</html>
