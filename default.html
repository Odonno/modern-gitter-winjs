<!DOCTYPE html>
<html ng-app="modern-gitter">
<head>
    <meta charset="utf-8" />
    <title>Modern Gitter</title>

    <!-- WinJS references -->
    <link href="dist/winjs/css/ui-light.css" rel="stylesheet" />
    <script src="dist/winjs/js/base.js"></script>
    <script src="dist/winjs/js/ui.js"></script>

    <!-- Angular WinJS references -->
    <script src="dist/angular/angular.js"></script>
    <script src="dist/angular-sanitize/angular-sanitize.js"></script>
    <script src="dist/angular-winjs/angular-winjs.js"></script>

    <!-- Faye references -->
    <script src="dist/faye/faye-browser.js"></script>

    <!-- Winstrap references -->
    <link href="dist/winstrap/css/winstrap.css" rel="stylesheet" />

    <!-- App references -->
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/default.js"></script>
</head>
<body class="win-type-body" ng-controller="AppCtrl">
    <win-split-view win-control="splitViewWinControl" class="splitView">
        <!-- pane area -->
        <win-split-view-pane>
            <div class="split-view-header">
                <button class="win-splitviewpanetoggle"
                        data-win-control="WinJS.UI.SplitViewPaneToggle"
                        data-win-options="{ splitView: select('.splitView') }"></button>
                <div class="title">Modern Gitter</div>
            </div>

            <div class="split-view-commands">
                <win-split-view-command label="'Rooms'" icon="'find'" on-invoked="goToHome()"></win-split-view-command>
                <win-split-view-command label="'Messages'" icon="'message'" on-invoked="goToSettings()"></win-split-view-command>
            </div>
        </win-split-view-pane>

        <!-- content area -->
        <win-split-view-content class="content-area">
            <aside id="rooms-area">
                <h2 id="roomsHeader" class="win-h2 content">Rooms</h2>

                <!-- list view of rooms -->
                <win-list-view id="roomsListView" item-data-source="orderedRooms">
                    <!-- room template -->
                    <win-item-template>
                        <div ng-click="selectRoom(item.data)">
                            <img class="room-tile-icon" ng-src="{{ item.data.image }}" />
                            <div class="room-tile-text">{{ item.data.name }}</div>
                        </div>
                    </win-item-template>

                    <win-list-layout></win-list-layout>
                </win-list-view>
            </aside>

            <section id="room-area">
                <!-- showed when no room selected -->
                <div ng-hide="currentRoom" class="fit-view flex">
                    <div class="no-room-text">Select a room</div>
                </div>

                <!-- show room -->
                <div ng-show="currentRoom" class="fit-view">
                    <!-- room description -->
                    <div id="roomDescription">
                        <div class="content">
                            <h2 class="win-h2">{{ currentRoom.name }}</h2>
                            <h6 class="win-h6 room-topic" ng-show="currentRoom.topic">{{ currentRoom.topic }}</h6>
                        </div>
                    </div>

                    <!-- list view of messages -->
                    <win-list-view id="messagesListView" item-data-source="messages">
                        <!-- header template -->
                        <win-list-view-header>
                            <progress class="win-progress-bar hide"></progress>
                        </win-list-view-header>

                        <!-- message template -->
                        <win-item-template>
                            <div ng-class="item.data.unread ? 'unread' : 'read'">
                                <div ng-bind-html="item.data.html"></div>
                            </div>
                        </win-item-template>

                        <win-list-layout></win-list-layout>
                    </win-list-view>

                    <hr />

                    <!-- actions (send message) -->
                    <div id="actions">
                        <button id="sendFiles" class="btn btn-link btn-icon no-outline">&#xE16C;</button>
                        <input id="textMessage" type="text" ng-model="textMessage" placeholder="Enter your text here..." ng-enter="sendMessage()" />
                        <button id="sendMessage" ng-disabled="!textMessage" ng-click="sendMessage()" class="btn btn-link btn-icon no-outline">&#xE122;</button>
                    </div>
                </div>
            </section>
        </win-split-view-content>
    </win-split-view>
</body>
</html>
